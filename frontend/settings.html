<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Settings - Chat App</title>
    <meta
      name="description"
      content="Manage your Chat App profile, account security, appearance, notifications, and privacy settings."
    />

    <!-- Primary CSS -->
    <link rel="stylesheet" href="static/css/var.css" fetchpriority="high" />
    <link
      rel="stylesheet"
      href="static/css/base/base.light.css"
      fetchpriority="high"
    />
    <link
      rel="stylesheet"
      href="static/css/chat/chat.light.css"
      fetchpriority="high"
    />
    <link
      rel="stylesheet"
      href="static/css/settings/settings.light.css"
      fetchpriority="high"
    />

    <!-- Synchronous theme detection -->
    <script>
      var t =
        localStorage.getItem("theme") ||
        (matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light");
      document.documentElement.setAttribute("data-theme", t);
      if (t === "dark")
        ["base", "chat", "settings"].forEach(function (m) {
          var l = document.createElement("link");
          l.rel = "stylesheet";
          l.href = "static/css/" + m + "/" + m + ".dark.css";
          l.fetchPriority = "high";
          document.head.appendChild(l);
        });
      var ld = function (v) {
        var e = document.getElementById("loading");
        if (e) e.style.display = v;
      };
      window.addEventListener("beforeunload", function () {
        ld("flex");
      });
      window.addEventListener("load", function () {
        ld("none");
      });
      window.addEventListener("pageshow", function (e) {
        if (e.persisted) ld("none");
      });
    </script>

    <!-- Preloads -->
    <link rel="preload" href="static/js/utils/theme_manager.js" as="script" />
    <link
      rel="preload"
      href="static/js/config/platform.config.js"
      as="script"
    />
    <link rel="preload" href="static/js/config/route.config.js" as="script" />
    <link rel="preload" href="static/js/utils/utils.js" as="script" />
    <link
      rel="preload"
      href="non-static/settings/settings.nav.js"
      as="script"
    />
    <link
      rel="preload"
      href="non-static/settings/settings.profile.js"
      as="script"
    />
    <link
      rel="preload"
      href="non-static/settings/settings.account.js"
      as="script"
    />
    <link
      rel="preload"
      href="non-static/settings/settings.preferences.js"
      as="script"
    />
    <link
      rel="preload"
      href="non-static/settings/settings.init.js"
      as="script"
    />

    <!-- Scripts -->
    <script defer src="static/js/utils/theme_manager.js"></script>
    <script defer src="static/js/config/platform.config.js"></script>
    <script defer src="static/js/config/route.config.js"></script>
    <script defer src="static/js/utils/utils.js"></script>
    <script defer src="non-static/settings/settings.nav.js"></script>
    <script defer src="non-static/settings/settings.profile.js"></script>
    <script defer src="non-static/settings/settings.account.js"></script>
    <script defer src="non-static/settings/settings.preferences.js"></script>
    <script defer src="non-static/settings/settings.init.js"></script>
  </head>
  <body>
    <div id="loading">Loading...</div>

    <nav class="navbar">
      <a href="chat" class="navbar-brand">
        <div class="navbar-logo">ðŸ’¬</div>
        <span>Chat</span>
      </a>

      <div class="navbar-menu">
        <a href="chat">Messages</a>
        <a href="contacts">Contacts</a>
      </div>

      <div class="navbar-end">
        <button
          class="btn btn-ghost btn-icon"
          id="themeToggle"
          title="Toggle theme"
        >
          <img
            src="static/icons/icons/sun.svg"
            alt="Toggle theme"
            width="20"
            height="20"
          />
        </button>
        <a href="settings" class="avatar avatar-sm active" title="Settings">
          <span id="userInitials"></span>
        </a>
      </div>
    </nav>

    <div class="settings-layout">
      <div class="settings-sidebar">
        <span class="settings-section-title">Account</span>
        <a
          href="#profile"
          class="settings-nav-item active"
          data-tab="profileTab"
        >
          <img
            src="static/icons/icons/user.svg"
            alt=""
            width="20"
            height="20"
          />
          <span>Profile</span>
        </a>
        <a href="#account" class="settings-nav-item" data-tab="accountTab">
          <img
            src="static/icons/icons/settings.svg"
            alt=""
            width="20"
            height="20"
          />
          <span>Account</span>
        </a>

        <span class="settings-section-title">Preferences</span>
        <a
          href="#appearance"
          class="settings-nav-item"
          data-tab="appearanceTab"
        >
          <img src="static/icons/icons/sun.svg" alt="" width="20" height="20" />
          <span>Appearance</span>
        </a>
        <a
          href="#notifications"
          class="settings-nav-item"
          data-tab="notificationsTab"
        >
          <img
            src="static/icons/icons/bell.svg"
            alt=""
            width="20"
            height="20"
          />
          <span>Notifications</span>
        </a>
        <a href="#privacy" class="settings-nav-item" data-tab="privacyTab">
          <img
            src="static/icons/icons/shield.svg"
            alt=""
            width="20"
            height="20"
          />
          <span>Privacy</span>
        </a>

        <span class="settings-section-title">About</span>
        <a href="#help" class="settings-nav-item" data-tab="helpTab">
          <img
            src="static/icons/icons/help-circle.svg"
            alt=""
            width="20"
            height="20"
          />
          <span>Help</span>
        </a>
      </div>

      <div class="settings-content">
        <div id="profileTab" class="settings-tab active">
          <div class="page-header">
            <h1>Profile</h1>
            <p>Manage your personal information and how others see you</p>
          </div>

          <div class="settings-section">
            <div class="profile-header">
              <div class="profile-avatar-wrapper">
                <div class="avatar avatar-xl" id="profileAvatar"></div>
                <button
                  class="avatar-edit-btn"
                  id="avatarEditBtn"
                  title="Change avatar"
                >
                  âœŽ
                </button>
              </div>
              <div class="profile-info">
                <h2 id="profileName">User Name</h2>
                <p id="profileEmail"></p>
              </div>
            </div>

            <form class="settings-form" id="profileForm">
              <div class="form-row">
                <div class="form-group">
                  <label class="form-label" for="firstName">First Name</label>
                  <input
                    type="text"
                    id="firstName"
                    name="firstName"
                    class="form-input"
                  />
                </div>
                <div class="form-group">
                  <label class="form-label" for="lastName">Last Name</label>
                  <input
                    type="text"
                    id="lastName"
                    name="lastName"
                    class="form-input"
                  />
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
